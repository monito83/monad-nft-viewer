<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Proyectos NFT Monad</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f0f0f0; margin: 0; padding: 0; color: #333; }
    header { background: #4c51bf; color: white; text-align: center; padding: 1.5rem 1rem; }
    header h1 { margin: 0; font-size: 1.8rem; }
    .filters { display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center; padding: 1rem; }
    .filters input, .filters select { padding: .5rem; font-size: 1rem; border: 1px solid #ccc; border-radius: 6px; }
    main { max-width: 1200px; margin: auto; padding: 1rem; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem; }

    .card {
      border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      padding: 1rem; display: flex; flex-direction: column; align-items: center; gap: .5rem;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .card:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(0,0,0,0.12); }

    /* Color segÃºn tier (degradado verde â†’ rojo) */
    .card.tier-1 { background: #e6fffa; } /* verde claro */
    .card.tier-2 { background: #def7ec; }
    .card.tier-3 { background: #f0f5ff; }
    .card.tier-4 { background: #FFF5F7; }
    .card.tier-5 { background: #ffe6e6; }

    .logo {
      width: 60px; height: 60px; border-radius: 50%; object-fit: cover; margin-bottom: .5rem;
    }
    .tag, .tier-badge {
      display: inline-block; color: white; font-weight: bold;
      padding: .3rem .6rem; border-radius: 4px; font-size: .9rem;
    }
    .tag.Abierto { background: #2f855a; }
    .tag.Cerrado { background: #c53030; }
    .tag.Pendiente, .tag.Otro { background: #718096; }

    /* Badge tier con Ã­cono y color */
    .tier-badge { margin-top: .2rem; }
    .tier-1-badge { background: gold; color: #333; }
    .tier-2-badge { background: silver; color: #333; }
    .tier-3-badge, .tier-4-badge, .tier-5-badge { background: #cd7f32; } /* bronce */

    .copy-btn, .buy-button {
      background: #4299e1; color: white; border: none; border-radius: 6px;
      padding: .4rem .8rem; cursor: pointer; font-size: .9rem; text-decoration: none;
    }
    .buy-button i { margin-right: 5px; }

    .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center;
    }
    .modal-content { background: white; padding: 2rem; border-radius: 12px; max-width: 600px;
      max-height: 85vh; overflow-y: auto; position: relative;
    }
    .modal-close { position: absolute; top: 10px; right: 20px; font-size: 1.5rem; cursor: pointer; color: #333; }
    .info-block { font-size: .95rem; line-height: 1.5; white-space: pre-line; margin-top: 1rem; }
    .info-block strong { display: block; margin-bottom: .2rem; }

    footer { text-align: center; padding: 1rem; font-size: .85rem; color: #666; }
  </style>
  <script src="https://kit.fontawesome.com/ae2d2bcb43.js" crossorigin="anonymous"></script>
</head>
<body>
  <header><h1>Proyectos NFT en Monad</h1><p>Actualizado: <span id="fecha"></span></p></header>
  <div class="filters">
    <input type="text" id="projectFilter" placeholder="Buscar proyecto...">
    <select id="tierFilter"><option value="">Todos los Tiers</option></select>
    <select id="estadoFilter"><option value="">Todos los Estados</option></select>
  </div>
  <main><div class="grid" id="cardGrid"></div></main>
  <div class="modal" id="modal"><div class="modal-content">
    <span class="modal-close" onclick="modal.style.display='none'">&times;</span>
    <div id="modalDetails"></div>
  </div></div>
  <footer>ðŸ”§ Generado desde Google Sheets</footer>
  <script>
  const SHEET_CSV = 'https://docs.google.com/spreadsheets/d/1lG1Xzzzs4jNKIIdeHT_PtY6ltGPp2RAlr7_ak-wRZ4/export?format=csv';
  let allData = [];

  Papa.parse(SHEET_CSV, {
    download: true,
    header: true,
    complete: results => {
      results.data = results.data.map(row => {
        const cleaned = {};
        for (const key in row) {
          const nk = key.trim().replace(/\s+/g, ' ');
          cleaned[nk] = row[key];
        }
        return cleaned;
      });
      allData = results.data.filter(r => r['Proyecto']);
      render(allData);
      fechaSpan.textContent = new Date().toLocaleDateString('es-AR');
    }
  });

  function render(data) {
    cardGrid.innerHTML = '';
    data.forEach((row, i) => {
      const card = document.createElement('div');
      card.className = `card ${getTierBadge(row['Tier'])}`;
      card.dataset.index = i;
      card.innerHTML = `
        ${row['Logo'] ? `<img src="${row['Logo']}" class="logo">` : ''}
        <h3>${row['Proyecto']}</h3>
        <div class="tag ${getEstadoClass(row['Estado Testnet'])}">${row['Estado Testnet']}</div>
        <div class="tier-badge ${getTierBadge(row['Tier'])}">Tier ${row['Tier']}</div>
        <button class="copy-btn">Ver detalles</button>
      `;
      card.querySelector('button').addEventListener('click',Â e => { e.stopPropagation(); showModal(i); });
      cardGrid.appendChild(card);
    });
  }

  function showModal(index) {
    const row = allData[index];
    modal.style.display = 'flex';
    modalDetails.innerHTML = `
      <h2>${row['Proyecto']}</h2>
      <div>${row['Floor Price Pase Directo (MON)'] || ''} ${row['Floor Price NFT Acumulativo (MON)'] || ''} MON</div>
      <!-- resto del contenido modal... -->
    `;
  }
</script>

</body>
</html>
