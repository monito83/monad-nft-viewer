<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Proyectos NFT en Monad</title>
  <style>
    body{font-family:'Segoe UI',sans-serif;background:#f0f0f0;margin:0;padding:0;color:#333}
    header{background:#4c51bf;color:white;text-align:center;padding:1.5rem}
    header h1{margin:0;font-size:1.8rem}
    .header-buttons{margin-top:0.5rem}
    .header-buttons button{background:transparent;border:1px solid white;color:white;border-radius:4px;padding:0.3rem 0.7rem;margin:0 0.3rem;cursor:pointer;font-size:0.9rem}
    .header-buttons button:hover{background:rgba(255,255,255,0.2)}
    .filters{display:flex;flex-wrap:wrap;gap:1rem;justify-content:center;padding:1rem}
    .filters input,.filters select{padding:0.5rem;font-size:1rem;border-radius:6px;border:1px solid #ccc}
    main{max-width:1200px;margin:auto;padding:1rem}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem}
    .card{background:white;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,0.1);padding:1rem;display:flex;flex-direction:column;align-items:center;gap:0.5rem;border-left:6px solid transparent;transition:transform .2s ease}
    .card:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(0,0,0,0.12);cursor:pointer}
    .logo{width:60px;height:60px;border-radius:50%;object-fit:cover;margin-bottom:0.5rem}
    .tag,.tier-badge{display:inline-block;padding:0.35rem 0.7rem;border-radius:8px;font-size:0.9rem;font-weight:bold;color:white;margin:0.2rem}
    .tag.Abierto{background:#38a169}
    .tag.Cerrado{background:#e53e3e}
    .tag.Pendiente,.tag.Desconocido,.tag.Otro{background:#718096}
    .tier-1-badge{background:#38a169}
    .tier-2-badge{background:#4299e1}
    .tier-3-badge{background:#d69e2e}
    .tier-4-badge{background:#ed8936}
    .tier-5-badge{background:#e53e3e}
    .copy-btn,.buy-button{background:#4299e1;color:white;border:none;border-radius:6px;padding:0.35rem 0.8rem;font-size:0.85rem;font-weight:bold;text-decoration:none;cursor:pointer;margin-top:0.3rem;transition:background .3s;display:inline-block}
    .buy-button:hover{background:#2b6cb0}
    .modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;padding:1rem;z-index:100}
    .modal-content{background:white;padding:2rem;border-radius:12px;width:100%;max-width:800px;max-height:90vh;overflow-y:auto;position:relative;box-shadow:0 8px 24px rgba(0,0,0,0.2)}
    .modal-close{position:absolute;top:15px;right:20px;font-size:1.6rem;cursor:pointer;color:white;background:#e53e3e;border:none;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;box-shadow:0 0 6px rgba(0,0,0,0.2);transition:background .2s;z-index:101}
    .modal-close:hover{background:#c53030}
    .section{margin-bottom:1.2rem;padding:1rem;border:1px solid #e2e8f0;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,0.05);line-height:1.4}
    .info-block{font-size:0.95rem;margin-top:0.4rem}
    .info-block strong{font-weight:600}
    .tooltip-icon{margin-left:0.3rem;cursor:help}
    .external-links a{margin-right:0.5rem;text-decoration:none;color:white;padding:0.3rem 0.6rem;border-radius:6px;font-size:0.9rem;display:inline-block}
    .external-links a.x{background:#1a1a1a}
    .external-links a.discord{background:#5865F2}
    .external-links a.web{background:#4A5568}
    footer{text-align:center;padding:1rem;font-size:0.85rem;color:#666}
  </style>
</head>
<body>
  <header>
    <h1>Proyectos NFT en Monad</h1>
    <div class="header-buttons">
      <button id="faqBtn">FAQ</button>
      <button id="donateBtn">Donar</button>
    </div>
    <p>Actualizado: <span id="fecha"></span></p>
  </header>

  <div class="filters">
    <input id="projectFilter" type="text" placeholder="Buscar proyectoâ€¦">
    <select id="tierFilter"><option value="">Todos los Tiers</option></select>
    <select id="estadoFilter"><option value="">Todos los Estados</option></select>
  </div>

  <main><div id="cardGrid" class="grid"></div></main>

  <div id="modal" class="modal">
    <div class="modal-content">
      <button class="modal-close" onclick="modal.style.display='none'">&times;</button>
      <div id="modalDetails"></div>
    </div>
  </div>

  <div id="faqModal" class="modal">
    <div class="modal-content">
      <button class="modal-close" onclick="faqModal.style.display='none'">&times;</button>
      <h2>FAQ</h2>
      <div id="faqContent"></div>
    </div>
  </div>

  <div id="donateModal" class="modal">
    <div class="modal-content">
      <button class="modal-close" onclick="donateModal.style.display='none'">&times;</button>
      <h2>Donaciones</h2>
      <p>Si te gusta esta herramienta, podÃ©s donar a la siguiente billetera MON:<br><strong>TuDirecciÃ³nMONabc123...</strong></p>
    </div>
  </div>

  <footer>ðŸ”§ Generado desde Google Sheets</footer>

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script>
  const SHEET_CSV = 'https://docs.google.com/spreadsheets/d/1lG1Xzzzs4jNKII6deHT_PtY6ltGPp2RAlr7_ak-wRZ4/export?format=csv';
  let allData = [];

  // ... funciones getTierBadge, getEstadoClass, etc. van igual

  // PapaParse y funciones
  Papa.parse(SHEET_CSV, {
    download: true,
    header: true,
    complete(results) {
      allData = results.data.map(row => {
        const cleaned = {};
        for (const key in row) cleaned[key.trim().replace(/\s+/g, ' ')] = row[key];
        return cleaned;
      }).filter(r => r['Proyecto']);

      // Render filtros y tarjetas
      const tierSet = new Set();
      const estadoSet = new Set();
      allData.forEach(r => {
        if (r['Tier']) tierSet.add(r['Tier']);
        if (r['Estado Testnet']) estadoSet.add(r['Estado Testnet']);
      });
      tierSet.forEach(t => {
        const o = document.createElement('option');
        o.value = t;
        o.textContent = t;
        document.getElementById('tierFilter').appendChild(o);
      });
      estadoSet.forEach(e => {
        const o = document.createElement('option');
        o.value = e;
        o.textContent = e;
        document.getElementById('estadoFilter').appendChild(o);
      });

      render(allData);
      document.getElementById('fecha').textContent = new Date().toLocaleDateString('esâ€‘AR');

      // âœ… Activar modales
      document.getElementById('faqBtn').onclick = () => {
        const faqText = allData[1]?.FAQ || 'Sin FAQ configurada.';
        document.getElementById('faqContent').innerText = faqText;
        document.getElementById('faqModal').style.display = 'flex';
      };
      document.getElementById('donateBtn').onclick = () => {
        document.getElementById('donateModal').style.display = 'flex';
      };
    }
  });

  // ... funciones render, showModal, etc. van igual

  // Filtros
  document.getElementById('projectFilter').addEventListener('input', applyFilters);
  document.getElementById('tierFilter').addEventListener('change', applyFilters);
  document.getElementById('estadoFilter').addEventListener('change', applyFilters);

  // Cerrar modales al hacer click fuera
  window.addEventListener('click', e => {
    if (e.target.id === 'modal') modal.style.display = 'none';
    if (e.target.id === 'faqModal') faqModal.style.display = 'none';
    if (e.target.id === 'donateModal') donateModal.style.display = 'none';
  });
</script>

</body>
</html>
